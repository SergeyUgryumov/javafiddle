<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html">
    <h:head>
        <title>Java Fiddle</title>
        <h:outputScript library="js" name="jquery-1.10.2.min.js"/>
        <h:outputScript library="js" name="moment-with-langs.min.js"/>
        <h:outputScript library="js" name="main.js"/>
        <h:outputScript library="js" name="sessionstorage.js"/>
        <h:outputScript library="js" name="todc-bootstrap.min.js"/>
        <h:outputScript library="js" name="bootstrap-dropdown.js"/>
        
        <h:outputScript library="cm" name="lib/codemirror.js"/>
        <h:outputScript library="cm" name="mode/java.js"/>
        <h:outputScript library="cm" name="addon/edit/matchbrackets.js"/>
        <h:outputScript library="cm" name="addon/edit/closebrackets.js"/>
        <h:outputScript library="cm" name="addon/fold/brace-fold.js"/>
        <h:outputScript library="cm" name="addon/fold/comment-fold.js"/>
        <h:outputScript library="cm" name="addon/fold/foldcode.js"/>
        <h:outputScript library="cm" name="addon/fold/foldgutter.js"/>
        <h:outputScript library="cm" name="addon/fold/indent-fold.js"/>
        <h:outputScript library="cm" name="addon/dialog/dialog.js"/>
        <h:outputScript library="cm" name="addon/search/searchcursor.js"/>
        <h:outputScript library="cm" name="addon/search/search.js"/>
        <h:outputScript library="cm" name="addon/selection/active-line.js"/>
        <h:outputScript library="cm" name="addon/selection/mark-selection.js"/>
        <h:outputScript library="cm" name="addon/hint/show-hint.js"/>
        <h:outputScript library="cm" name="addon/hint/anyword-hint.js"/>
        <h:outputScript library="cm" name="addon/display/fullscreen.js"/>
        
        <h:outputStylesheet library="css" name="style.css"/>
        <h:outputStylesheet library="css" name="osans.css"/>
        <h:outputStylesheet library="css" name="bootstrap.min.css"/>

        <h:outputStylesheet library="cm" name="lib/codemirror.css"/>
        <h:outputStylesheet library="cm" name="theme/idea.css"/> 
        <h:outputStylesheet library="cm" name="addon/fold/fold.css"/>
        <h:outputStylesheet library="cm" name="addon/dialog/dialog.css"/>
        <h:outputStylesheet library="cm" name="addon/hint/show-hint.css"/>
        <h:outputStylesheet library="cm" name="addon/display/fullscreen.css"/>
    </h:head>
    <h:body>
        <div id="header">
            <div id="header-top">
                <div id="logo"> 
                    <div class="ltgt"><img src="resources/img/br_prev.ico"></img></div>
                    <h2><h:link value="JavaFiddle" outcome="index" /></h2>
                    <div class="ltgt"><img src="resources/img/br_next.ico"></img></div>
                </div>
                <h:panelGroup layout="block" id="projectname" >NetCrackerTasks</h:panelGroup>
                <h:panelGroup layout="block" id="username" >
                    Logged in as <h:link value="#{userBean.profile.nickname}" outcome="index" />
                </h:panelGroup>
                <div id="bottom"> 
                    <ul id="main_menu" class="nav nav-pills">
                        <li class="dropdown">
                            <div class="dropdown-toggle" data-toggle="dropdown">Project</div>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
                                <li onclick="saveFile();">Save</li>
                                <li onclick="saveAllFiles();">Save All</li>
                                <li onclick="saveProject();">Commit</li>
                                <li class="divider"></li>
                                <li onclick="closeProject();">Close Project</li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <div class="dropdown-toggle" data-toggle="dropdown">Edit</div>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
                                <li onclick="javaEditor.execCommand('undo');">Undo</li>
                                <li onclick="javaEditor.execCommand('redo');">Redo</li>
                                <li class="divider"></li>
                                <li onclick="javaEditor.execCommand('findPrev');">Find Previous</li>
                                <li onclick="javaEditor.execCommand('findNext');">Find Next</li>
                                <li class="divider"></li>
                                <li onclick="javaEditor.execCommand('find');">Find</li>
                                <li onclick="javaEditor.execCommand('replace');">Replace</li>
                                <li onclick="javaEditor.execCommand('replaceAll');">Replace All</li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <div class="dropdown-toggle" data-toggle="dropdown">View</div>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
                                <li onclick="toggleConsoleWindow();">Console</li>
                                <li onclick="toggleProjectTreePanel();">Project Tree</li>
                                <li onclick='javaEditor.setOption("fullScreen", true);'>Full Screen</li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <div class="link dropdown-toggle" data-toggle="dropdown">Run</div>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
                                <li onclick="compile();">Compile</li>
                                <li onclick="execute();">Run</li>
                                <li onclick="compileAndRun();">Compile&amp;Run</li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <div class="dropdown-toggle" data-toggle="dropdown">History</div>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
                                <li onclick="showRevisionsList();">Commit's List</li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <div class="dropdown-toggle" data-toggle="dropdown">Help</div>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
                                <li onclick="openStaticTab('shortcuts');">Shortcuts</li>
                                <li onclick="openStaticTab('about');">About JavaFiddle</li>
                            </ul>
                        </li>
                    </ul>
                    <h:panelGroup layout="block" id="latest_update">Last changes: not saved yet.</h:panelGroup>
                    <h:link id="share" value="Share Code..." outcome="index" />
                </div>
            </div>
            <div id="header-bottom">
                <ul id="editor_buttons">
                    <li><h:commandButton value="" type="button" id="save" onclick="saveFile();" title="Save current file" /></li>
                    <li><h:commandButton value="" type="button" id="saveall" onclick="saveAllFiles();" title="Save all files" /></li>
                    <div class="separator" />
                    <li><h:outputText value="&#160;" style="font-size:10%"/></li>
                    <li><h:commandButton value="" type="button" id="undo" onclick="javaEditor.execCommand('undo');" title="Undo" /></li>
                    <li><h:commandButton value="" type="button" id="redo" onclick="javaEditor.execCommand('redo');" title="Redo" /></li>
                    <div class="separator" />
                    <li><h:outputText value="&#160;" style="font-size:10%"/></li>
                    <li><h:commandButton value="" type="button" id="compile" onclick="compile();" title="Compile"/></li>
                    <li><h:commandButton value="" type="button" id="run" onclick="execute();" title="Run"/></li>
                    <li><h:commandButton value="" type="button" id="compileandrun" onclick="compileAndRun();" title="Compile&amp;Run"/></li>
                </ul>  
                <ul id="tabpanel" class="tabs">
                </ul>
                <div style="clear:both"></div>
            </div>
        </div>
        <div id="content">
            <div id="treepanel" class="mainblock">
                <div id="tree" class="project">

                </div>
            </div>
            <div id="rightblock"> 
                <div id="codetext" class="mainblock">
                    <h:inputTextarea id="textarea"/>
                    <script type="text/javascript">
                    //<![CDATA[
                        $(function() {
                            $('.dropdown-toggle').dropdown();
                        });
                    
                        PATH = "#{request.contextPath}";
                        PROJECTPARAM = "#{param['project']}";               

                        CodeMirror.commands.autocomplete = function(cm) {
                            CodeMirror.showHint(cm, CodeMirror.hint.anyword);
                        };
                        javaEditor = CodeMirror.fromTextArea(document.getElementById("textarea"), {
                            lineNumbers: true,
                            styleActiveLine: true,
                            theme: "idea",
                            indentWithTabs: true,
                            styleSelectedText: true,
                            indentUnit: 4,
                            smartIndent: true,
                            mode: "text/x-java",
                            matchBrackets: true,
                            autoCloseBrackets: true,
                            extraKeys: {
                                "Ctrl-Q": function(cm){cm.foldCode(cm.getCursor());},
                                "Ctrl-S": function(){saveFile();},
                                "Shift-Ctrl-S": function(){saveAllFiles();},
                                "Ctrl-Space": "autocomplete",
                                "F11": function(cm) {
                                    cm.setOption("fullScreen", !cm.getOption("fullScreen"));
                                },
                                "Esc": function(cm) {
                                    if (cm.getOption("fullScreen")) cm.setOption("fullScreen", false);
                                },
                                Tab: function(cm) {
                                    var spaces = Array(cm.getOption("indentUnit") + 1).join(" ");
                                    cm.replaceSelection(spaces, "end", "+input");
                                }
                            },
                            foldGutter: {
                                rangeFinder: new CodeMirror.fold.combine(CodeMirror.fold.brace, CodeMirror.fold.comment)
                            },    
                            gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
                        });
                        javaEditor.on("change", function() {
                            pushModifiedTab();
                        });
                    //]]>
                    </script>
                </div>
                <div id="compilation-window" class="mainblock closed">
                    <div id="stdout" />
                    <div id="stdin">
                        <h:outputText id="stdin-name" value="stdin:" />
                        <h:inputText id="stdinput" onkeypress="if (event.keyCode === 13){sendInput(); return false;}" />
                    </div>
                </div>     
            </div>
        </div>
        <div id="projectMenu" class="dropdown clearfix contextMenu">
            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu" style="display:block;position:static;margin-bottom:5px;">
                <li onclick="popup_new_package();">New Package</li>
                <li class="divider"></li>
                <li onclick="compile();">Compile</li>
                <li onclick="execute();">Run</li>
                <li onclick="compileAndRun();">Compile&amp;Run</li>
                <li class="divider"></li>
                <li onclick="popup_popup_rename();">Rename</li>
                <li onclick="popup_popup_delete();">Close</li>
            </ul>
        </div>
        <div id="srcMenu" class="dropdown clearfix contextMenu">
            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu" style="display:block;position:static;margin-bottom:5px;">
                <li onclick="popup_new_package();">New Package</li>
                <li onclick="popup_new_file();">New Java Class</li>
            </ul>
        </div>    
        <div id="packageMenu" class="dropdown clearfix contextMenu">
            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu" style="display:block;position:static;margin-bottom:5px;">
                <li onclick="popup_new_file();">New Java Class</li>
                <li onclick="popup_popup_rename();">Rename</li>
                <li onclick="popup_popup_delete();">Delete</li>
            </ul>
        </div>  
        <div id="fileMenu" class="dropdown clearfix contextMenu">
            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu" style="display:block;position:static;margin-bottom:5px;">
                <li onclick="popup_new_popup_openfile();">Open</li>
                <li onclick="popup_popup_rename();">Rename</li>
                <li onclick="popup_popup_delete();">Delete</li>
            </ul>
        </div>
        <div id="typelist" class="dropdown clearfix contextMenu">
            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu" style="display:block;position:static;margin-bottom:5px;">
                <li class='class' onclick="setFileType('class');">Class</li>
                <li class='interface' onclick="setFileType('interface');">Interface</li>
                <li class='runnable' onclick="setFileType('runnable');">Runnable class</li>
                <li class='enum' onclick="setFileType('enum');">Enumeration</li>
                <li class='annotation' onclick="setFileType('annotation');">Annotation</li>
                <li class='exception' onclick="setFileType('exception');">Exception</li>
            </ul>
        </div>
    </h:body>
</html>
